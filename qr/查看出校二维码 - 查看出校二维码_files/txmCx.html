
<!-- saved from url=(0064)http://e-office.nuist.edu.cn/nxg_data/txmCx?account=202053080020 -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>销假进校二维码</title>
    <script src="./jquery-1.7.2.min.js.download"></script>
    <!--<script type="text/javascript" src="./jkm/js/jquery.qrcode.min.js?v=1"></script>
-->
    <script type="text/javascript" src="./qrcode.min.js.download"></script>
<style>
    @charset "utf-8";
    /* CSS Document */
    * {
        margin: 0;
        padding: 0;

    }

    .phone_login_btn_2 {
        width: 100%;
        height: 126px;
        background: #6CA7FF;
        border-radius: 30px;
        color: #fff;
        font-size: 30px;
        margin: 100px auto;
        display: block;
        text-align: center;
        text-decoration: none;
        line-height: 60px;
    }

    body:before {
        content: ' ';
        position: fixed;

        z-index: -1;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
        background: url(../img/bg.png);
        background-size: 100% auto;
    }

    .phone_logo_index {
        width: 100%;
        text-align: center;
        padding: 10px 0 10px 0;
    }
    .phone_logo_login {
        width: 100%;
        text-align: center;
        padding: 10px 0 10px 0;
        position: absolute;
        top: 200px;
    }

    .phone_logo_find {
        width: 100%;
        text-align: center;
        padding: 140px 0 60px 0;
    }

    .phone_login_box {
        width: 76%;
        margin: 0 auto;
        position: absolute;
        left: 90px;
        top: 560px;
    }

    .phone_login_user {
        padding-bottom: 60px;
    }

    .phone_login_user_text {
        width: 450px;
        border: 0;
        border-bottom: 1px solid #8bb3e9;
        height: 75px;
        line-height: 75px;
        background: none;
        font-size: 32px;
    }

    .phone_login_user_img {
        height: 75px;
        line-height: 75px;
        vertical-align: middle;
        margin-right: 28px;
    }
    .phone_login_yzm_btn {
        width: 25%;
        min-height: 40px;
        background: #ffffff;
        color: #989898;
        font-size: 28px;
        display: block;
        text-align: center;
        text-decoration: none;
        line-height: 10px;
        position: absolute;
        left: 70%;
        top: 3%;
        border: none;
    }

    .phone_login_btn {
        width: 100%;
        min-height: 75px;
        background: #6CA7FF;
        /*margin-left:5%;*/
        border-radius: 50px;
        color: #fff;
        font-size: 36px;
        margin-top: 20px;
        display: block;
        text-align: center;
        text-decoration: none;
        line-height: 75px;
    }

    .phone_login_btn_1 {
        width: 100%;
        height: 120px;
        background: #6CA7FF;
        /*margin-left:5%;*/
        border-radius: 30px;
        color: #fff;
        font-size: 36px;
        margin-top: 40px;
        display: block;
        text-align: center;
        text-decoration: none;
        line-height: 120px;
    }

    .phone_login_btn_2 {
        width: 100%;
        height: 126px;
        background: #6CA7FF;
        border-radius: 30px;
        color: #fff;
        font-size: 30px;
        margin: 100px auto;
        display: block;
        text-align: center;
        text-decoration: none;
        line-height: 60px;
    }

    .phone_login_btn_3 {
        width: 100%;
        height: 120px;
        background: #6CA7FF;
        /*margin-left:5%;*/
        border-radius: 50px;
        color: #fff;
        font-size: 32px;
        margin-top: 20px;
        display: block;
        text-align: center;
        text-decoration: none;
        line-height: 120px;
    }

    .phone_login_btn_4 {
        width: 100%;
        height: 120px;
        background: #6886e6;
        /*margin-left:5%;*/
        border-radius: 50px;
        color: #fff;
        font-size: 36px;
        margin-top: 40px;
        display: block;
        text-align: center;
        text-decoration: none;
        line-height: 120px;
    }

    .phone_login_btn_5 {
        width: 100%;
        height: 120px;
        background: #6CA7FF;
        /*margin-left:5%;*/
        border-radius: 50px;
        color: #fff;
        font-size: 32px;
        margin-top: 20px;
        display: block;
        text-align: center;
        text-decoration: none;
        line-height: 60px;
    }

    .phone_forger {
        float: left;
        font-size: 28px;
        text-decoration: none;
        padding-top: 15px;
        color: #004287;
    }

    .phone_change {
        float: right;
        font-size: 28px;
        text-decoration: none;
        padding-top: 15px;
        color: #004287;
    }

    .phone_login_more {
        padding-top: 100px;
    }

    .phone_more_title {
        width: 100%;
        height: 70px;
        line-height: 70px;
        background: url(../img/xian.png) no-repeat center center;
        text-align: center;
        font-size: 34px;
        color: #004287;
    }

    .phone_login_nav {
        float: left;
        width: 30%;
        text-align: center;
        margin-top: 40px;
    }

    .phone_login_nav dd {
        font-size: 28px;
        color: #004287;
        line-height: 60px;
    }

    .phone_login_find_title {
        width: 100%;
        text-align: center;
        color: #004287;
        font-size: 36px;
        font-weight: normal;
        margin-bottom: 100px;
    }

    .phone_login_find_title1 {
        width: 100%;
        text-align: center;
        color: #004287;
        font-size: 36px;
        font-weight: normal;
        margin-bottom: 40px;
    }

    .phone_login_find_title p {
        font-size: 30px;
        color: #999;
        line-height: 45px;
    }

    .phone_find_nav {
        padding-left: 50px;
        height: 90px;
    }

    .phone_find_img {
        float: left;
        padding-right: 20px;
    }

    .phone_find_p {
        float: left;
        /*line-height:60px;*/
        font-size: 32px;
        color: #004287;
    }

    .phone_login_find_box {
        padding-bottom: 30px;
        overflow: hidden;
    }

    .phone_login_find_box_text {
        width: 380px;
        border: 0;
        border-bottom: 1px solid #8bb3e9;
        height: 75px;
        line-height: 75px;
        background: none;
        font-size: 32px;
        float: left;
    }


    .phone_safe_1 a {
        float: right;
        height: 30px;
        margin-top: -60px;
        margin-right: 50px;
        color: #f4c766;
        font-size: 28px;
    }

    .phone_safe_2 a {
        float: right;
        height: 30px;
        margin-top: -60px;
        margin-right: 50px;
        color: #c2151f;
        font-size: 28px;
    }




    .phone_login_nav_1 dd {
        font-size: 26px;
        color: #004287;
        line-height: 60px;
    }

    .phone_pt_text {
        font-size: 24px;
        color: #666;
        line-height: 50px;
    }




    @charset "utf-8";
    body {
        background-color: #fff;
        padding: 0;
        margin: 0;
        font-family: "Microsoft YaHei";
    }

    input:-moz-placeholder, textarea:-moz-placeholder {
        color: #fff;
    }

    input:-ms-input-placeholder, textarea:-ms-input-placeholder {
        color: #fff;
    }

    input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {
        color: #fff;
    }

    ol, ul, li {
        padding-left: 0em;
        list-style: none
    }

    h2, h3, h4, ul, li, p {
        padding: 0;
        margin: 0;
    }

    input {
        outline: none;
    }

    html {
        padding: 0;
        margin: 0;
    }

    html, body {
        height: 100%
    }

    .blue-bg {
        background: url(/nxg_data/images/banner.png) no-repeat left top;
        background-size: 100% auto;
    }

    .top-header {
        line-height: 44px;
        height: 44px;
        font-size: 1.3rem;
        color: #fff;
        text-align: center;
        width: 100%;
    }

    .banner {
        width: 100%;
        text-align: center;
        margin: 40px 0;
    }

    .banner img {
        width: 60%;
        height: auto;

    }

    .content-box {
        width: 90%;
        height: 800px;
        border-radius: 10px;
        box-shadow: 0 0 8px rgba(141, 141, 141, 0.4);
        background: #fff;
        margin: 0 auto;
        position: relative;
        top: -10px;
    }

    .top-title {
        width: 90%;
        margin: 0 auto;
        line-height: 60px;
    }

    .top-title h3 {
        font-size: 1.3rem;
        color: #333;
        width: 60%;
        font-weight: normal;
        overflow: hidden;
        white-space: nowrap;
        text-overflow: ellipsis;
    }

    .link-btn {
        width: 100%;
        text-align: center;
        color: #028aff;
        text-decoration: none;
        font-size: 1rem;
        margin-top: 26px;
    }


</style><script>
    jQuery(function () {
        var state = '';
        var color = '';
        var content = "";
        var informationUrl = '';
        if (state == 'pass') {
            content = informationUrl;
        } else if (state == 'invalid') {
            content = '当前码无效，请查看申请历史';
        }
        console.info(content);
        jQuery('#output').qrcode({
            render: "table",
            width: 240,
            height: 240,
            text: content,
            render: "canvas", //也可以替换为table
            foreground: "#" + color,
            background: "#FFF"

        });
    });


    //获取系统时间
    function showTime() {
        nowtime = new Date();
        year = nowtime.getFullYear();//年
        month = nowtime.getMonth() + 1;//月
        day = nowtime.getDate();//日
        hour = nowtime.getHours();//时
        minutes = nowtime.getMinutes(); //分
        seconds = nowtime.getSeconds(); //秒
        //文字增加空格
        //document.getElementById("div_timer").style = "white-space:pre;";
        //显示时间
        document.getElementById("div_timer").innerText =  p(month) + "-" + p(day)+"\t\t\t"+p(hour) + ":" + p(minutes) + ":" + p(seconds);
        // document.getElementById("div_timer_time").innerText = p(hour) + ":" + p(minutes) + ":" + p(seconds);
    }

    setInterval("showTime()", 1000);

    //月日时分秒小于10补0
    function p(s) {
        return s < 10 ? '0' + s : s;
    }
</script><style>
    *{padding:0;margin: 0}
    .body-content{
        text-align: center;
        margin: auto;
    }
    div{
        margin-top: 10px;
    }
</style></head>





<body class="blue-bg">
<div class="content-box">
    <div class="body-content" style="width: 260px">
        <div id="div_bt" style="font-size:20px;">请假出校二维码</div>
        <div id="div_xm" style="font-weight: bold; font-size: 1rem;padding-top: 30px;">ATANEPESOV DOVRAN 202053080020</div>
        <div id="div_bm" style="font-weight: bold; font-size: 1rem;">计算机学院</div>
        <div id="div_timer" style="font-weight: bold; font-size: 1.5rem;">09-09			21:20:54</div>
        <div id="div_ewm_p" style="border:solid 5px  #4e6bb1;padding: 4px;">
            <div id="div_ewm" title="http://e-office.nuist.edu.cn/infoplus/form/e2901491/view/7YWJKOAK9I">
            <canvas width="240" height="240" style="display: none;"></canvas><img src="..//img/blue.jpg" style="display: block;"></div>
        </div>

        <!--<div id="div_timer_time"  style="font-weight: bold; font-size: 2.5rem;"></div>-->
        <div id="div_yxsj" style="font-weight: bold; font-size: 1rem;color: red">有效时间：2022-09-08 10:16至2022-09-08 22:50</div>
        <div id="div_zt" style="font-weight: bold; font-size: 1rem;">审核状态：审核通过</div>


    </div>
</div>
<script type="text/javascript">


    //获取url中的参数方法
    function getParams(name){
        //构造一个含有目标参数的正则表达式对象
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        //匹配目标参数
        var r = window.location.search.substr(1).match(reg);
        //返回参数
        if (r != null) {
            return unescape(r[2]);
        } else{
            return null;
        }
    }

    var account = getParams("account")//"5591";
    function fresh() {
        location.reload();
    }
    setInterval(fresh,1000*60*5);
    function createQrCode(text,color) {
        new QRCode(document.getElementById("div_ewm"), {
            text: text,
            colorDark: color,
            width: 240,
            height: 240
        });
    }
    $.post("/nxg_data/get/cxData",{account:account},function (data) {
        console.log(data);
        if (null != data.id || undefined != data.id) {
            $("#div_xm").html(data.XingMing_Name + " " + data.XH)
            $("#div_bm").html(data.YuanXi_Name)
            $("#div_bt").html("请假出校二维码").attr("style","font-size:20px;");

            var color = "gray";
            if (data.c_color == 1) {
                color = "#4e6ab1";
                $("#div_ewm_p").attr("style", "border:solid 5px  #0000FF ;padding: 4px;border-color: #0000FF ");
            } else if (data.c_color == 2) {
                color = "gray";
                $("#div_ewm_p").attr("style", "border:solid 5px  #4EB16E;padding: 4px;border-color: gray");
            }
            var url = "http://e-office.nuist.edu.cn/infoplus/form/e" + data._entry + "/view/" + data._token;
            console.log(url);
            $("#div_ewm").html(createQrCode(url, color));

            $("#div_yxsj").html("有效时间：" + data.startTime + "至" + data.endTime);

            $("#div_zt").html("审核状态：" + "审核通过");

        }else {
            $("#div_ewm").html("您还未正常请假，或请假申请尚未通过审批。").attr("style","color:red")
            $("#div_timer").attr("hidden","true");
        }

    });

</script>





</body></html>